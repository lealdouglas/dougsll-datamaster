# Especificação do contrato de dados
# Data contract specification
dataContractSpecification: 0.9.3

# Identificador único do contrato de dados
# Unique identifier for the data contract
id: urn:datacontract:datamaster:jarvis:prep:account

# Informações sobre o contrato de dados
# Information about the data contract
info:
  # Título do contrato de dados
  # Title of the data contract
  title: Jarvis Prep Account

  # Versão do contrato de dados
  # Version of the data contract
  version: 1.0.0

  # Descrição do contrato de dados
  # Description of the data contract
  description: |
    descricao do contrato.

  # Proprietário do contrato de dados
  # Owner of the data contract
  owner: Jarvis Ingest

  # Domínio do contrato de dados
  # Domain of the data contract
  domain: 'risk'

  # Contato do proprietário do contrato de dados
  # Contact information for the data contract owner
  contact:
    name: Douglas Leal
    url: https://www.linkedin.com/in/douglasleall/

# Informações sobre os servidores
# Information about the servers
servers:
  development:
    type: databricks
    host: https://adb-223140009464856.16.azuredatabricks.net
    catalog: crisk
    schema: silver

models:
  account:
    description: client table
    type: table
    fields:
      uuid:
        description: unique ID
        type: string
        primary: true
        unique: true
        required: true
        example: '123e4567-e89b-12d3-a456-426614174000'
      name:
        description: name of client
        type: string
        required: true
      email:
        description: e-mail of client
        type: string
        required: true
      city:
        description: city of client
        type: string
        required: true

# Níveis de serviço do contrato de dados
# Service levels for the data contract
servicelevels:
  # Retenção dos dados
  # Data retention
  retention:
    period: 1 day

  # Frequência de atualização dos dados
  # Data update frequency
  frequency:
    description: Data is updated once a day
    type: batch
    cron: 49 1 0/2 * * ? #cron schedule

# Exemplos de dados para o modelo de dados
# Data examples for the data model
examples:
  - type: 'csv'
    model: 'account'
    data: |
      uuid,name,email,city
      123e4567-e89b-12d3-a456-426614174000,João Silva,joao.silva@example.com,São Paulo
      987f1234-e21b-34f5-b987-654321098765,Maria Oliveira,maria.oliveira@example.com,Rio de Janeiro
      25a6d63b-123a-4b6c-a64a-7c18b912345a,Carlos Souza,carlos.souza@example.com,Brasília
      16e5c33f-9b0d-4c2f-a56a-d94b6cd74312,Ana Santos,ana.santos@example.com,Belo Horizonte

# Regras de qualidade dos dados
# Data quality rules
quality:
  type: SodaCL
  specification:
    checks for account:
      - row_count > 25
      - risk_score between 0 and 100

# Workflow de ingestão de dados
# Data ingestion workflow
workflow:
  model: 'account'
  email_notifications:
    on_start: ['douglas.sleal@outlook.com']
    on_success: ['douglas.sleal@outlook.com']
    on_failure: ['douglas.sleal@outlook.com']
  tasks:
    - task_key: main_task
      python_wheel_task:
        package_name: definition_project
        entry_point: main
