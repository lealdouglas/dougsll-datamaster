# Especificação do contrato de dados
# Data contract specification
dataContractSpecification: 0.9.3

# Identificador único do contrato de dados
# Unique identifier for the data contract
id: urn:datacontract:datamaster:jarvis:prep:account

# Informações sobre o contrato de dados
# Information about the data contract
info:
  # Título do contrato de dados
  # Title of the data contract
  title: Jarvis Prep Account

  # Versão do contrato de dados
  # Version of the data contract
  version: 1.0.0

  # Descrição do contrato de dados
  # Description of the data contract
  description: |
    descricao do contrato.

  # Proprietário do contrato de dados
  # Owner of the data contract
  owner: Jarvis Prep

  # Domínio do contrato de dados
  # Domain of the data contract
  domain: 'risk'

  # Contato do proprietário do contrato de dados
  # Contact information for the data contract owner
  contact:
    name: Nome Autor
    url: https://www.linkedin.com/in/nomeautor/

# Informações sobre os servidores
# Information about the servers
servers:
  development:
    type: databricks
    host: https://adb-1054897183059008.8.azuredatabricks.net
    catalog: crisk
    schema: silver

models:
  account:
    description: client table
    type: table
    fields:
      user_id:
        description: unique ID
        type: string
        length: 10
        primary: true
        unique: true
        required: true
        example: '0987654321'
      name:
        description: name of client
        type: string
        required: true
      email:
        description: e-mail of client
        type: string
        required: true
      city:
        description: city of client
        type: string
        required: true

# Níveis de serviço do contrato de dados
# Service levels for the data contract
servicelevels:
  # Retenção dos dados
  # Data retention
  retention:
    period: 1 day

  # Frequência de atualização dos dados
  # Data update frequency
  frequency:
    description: Data is updated once a day
    type: batch
    cron: 49 1 0/2 * * ? #cron schedule

# Exemplos de dados para o modelo de dados
# Data examples for the data model
examples:
  - type: 'csv'
    model: 'account'
    data: |
      user_id,name,email,city
      1234567890,João Silva,joao.silva@example.com,São Paulo
      0987654321,Maria Oliveira,maria.oliveira@example.com,Rio de Janeiro
      2345678901,Carlos Souza,carlos.souza@example.com,Brasília
      3456789012,Ana Santos,ana.santos@example.com,Belo Horizonte
      4567890123,Pedro Costa,pedro.costa@example.com,Salvador
      5678901234,Juliana Lima,juliana.lima@example.com,Fortaleza
      6789012345,Lucas Pereira,lucas.pereira@example.com,Curitiba
      7890123456,Fernanda Araújo,fernanda.araujo@example.com,Recife

# Regras de qualidade dos dados
# Data quality rules
quality:
  type: SodaCL
  specification:
    checks for account:
      - row_count < 25

# Workflow de ingestão de dados
# Data ingestion workflow
workflow:
  model: 'account'
  email_notifications:
    on_start: ['nomeautor@example']
    on_success: ['nomeautor@example']
    on_failure: ['nomeautor@example']
  tasks:
    - task_key: main_task
      python_wheel_task:
        package_name: definition_project
        entry_point: main
